<script type="module">
    import WorkerMessage from "../iframe.js";

    const message = new WorkerMessage(self);
    message.onMessage = (e) => {
        console.log(e)
    }
    message.postMessage("inner")
    message.onRequestMessage = function (message, resolve, reject) {
        resolve(message + "; iframe response")
    }

    message.requestMessage("to parent").then((e) => {
        console.log(e)
    }).catch((e) => {
        console.error(e)
    })
</script>